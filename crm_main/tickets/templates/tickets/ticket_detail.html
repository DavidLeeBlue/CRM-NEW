{% extends 'core/base.html' %}

{% block title %}Ticket Details{% endblock %}

{% block content %}
<!-- ------------------------------------------------------- -->

<div class="card">
    <div class="card-header"><strong>
        {{ ticket.title }}
    </strong></div>
    <div class="card-body">
        <p class="card-text">
            <strong>Description: </strong>{{ ticket.description }}
        </p>
        <p class="card-text">
            <strong>Priority: </strong>{{ ticket.priority }}
        </p>
        <p class="card-text">
            <strong>Status: </strong>{{ ticket.status }}
        </p>
        <p class="card-text">
            <strong>Created by: </strong>{{ ticket.created_by }}
        </p>
        <p class="card-text">
            <strong>Created at: </strong>{{ ticket.created_at }}
        </p>
    </div>
</div>

<!-- Comments Section -->
<div class="card mt-4">
    <div class="card-header"><strong>Comments</strong></div>
    <div class="card-body">
        {% for comment in ticket.comments.all %}
            <p class="card-text">
                <strong>{{ comment.created_by }}:</strong> {{ comment.content }}
            </p>
        {% empty %}
            <p class="card-text">No comments yet.</p>
        {% endfor %}
    </div>
</div>

<!-- Add Comment Form -->
<div class="card mt-4">
    <div class="card-header"><strong>Add a Comment</strong></div>
    <div class="card-body">
        <form method="post" action="{% url 'tickets:add_comment' ticket.pk %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Add Comment</button>
        </form>
    </div>
</div>

{% endblock %}